// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema
//provider = "postgresql"

generator client {
  provider = "prisma-client-js"
}

datasource db {  
  provider = "mysql"
  url      = env("DATABASE_URL")
}


model User {
  id          Int         @id @default(autoincrement())  
  fullname    String
  age         Int?
  phone       Int?
  gender      Gender?
  role        Role        @default(USER)
  address     String?
  email       String      @unique
  password    String
  orders      Order[]

}

model Product {
  id                  Int           @id @default(autoincrement())
  title               String        @db.VarChar(200)
  description         String
  price               Int
  discountPercentage  Decimal
  stock               Int
  brand               String 
  category            Category
  thumbnail           String
  photos              Photo[]
  orderitems          OrderItems[]
  createdAt           DateTime      @default(now())
  updatedAt           DateTime      @updatedAt
}

model Order {
  id                  Int             @id @default(autoincrement())
  user                User            @relation(fields: [userId], references: [id])
  userId              Int           
  total               Decimal
  payment             PaymentDetails?
  orderitems          OrderItems[]
  createdAt           DateTime        @default(now())
  updatedAt           DateTime        @updatedAt

}

model PaymentDetails {
  id                  Int             @id @default(autoincrement())
  order               Order           @relation(fields: [orderId], references: [id])
  orderId             Int             @unique          
  amount              Int
  provider            String          @db.VarChar(20)
  status              String          @db.VarChar(20)
  createdAt           DateTime        @default(now())
  updatedAt           DateTime        @updatedAt

}

model OrderItems {
  id                  Int             @id @default(autoincrement())
  order               Order           @relation(fields: [orderId], references: [id])
  orderId             Int             @unique
  product             Product         @relation(fields: [productId], references: [id])
  productId           Int
  price               Int
  quantity            Int
  total               Int  
  discountPercentage  Decimal
  discountedPrice     Decimal
  createdAt           DateTime        @default(now())
  updatedAt           DateTime        @updatedAt
}

model Photo {
  id                  Int             @id @default(autoincrement())
  height              Int
  width               Int
  url                 String
  product             Product         @relation(fields: [productId], references: [id])
  productId           Int
  createdAt           DateTime        @default(now())
  updatedAt           DateTime        @updatedAt
}

enum Category {
  smartphones
  laptops
  fragrances
  skincare
  groceries
  homedecoration
  furniture
  tops
  womensdresses
  womensshoes
  mensshirts
  mensshoes
  menswatches
  womenswatches
  womensbags
  womensjewellery
  sunglasses
  automotive
  motorcycle
  lighting
}
enum Gender {
  Male
  Female
  Others
}

enum Role {
  USER
  ADMIN
}